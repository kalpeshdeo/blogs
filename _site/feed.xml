<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-04-07T15:59:07+05:30</updated><id>http://localhost:4000/feed.xml</id><title type="html">One2N blogs</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><entry><title type="html">Mock API in Microservices Architecture</title><link href="http://localhost:4000/microservices/2023/04/07/mock-api-in-microservices-architecture.html" rel="alternate" type="text/html" title="Mock API in Microservices Architecture" /><published>2023-04-07T15:30:12+05:30</published><updated>2023-04-07T15:30:12+05:30</updated><id>http://localhost:4000/microservices/2023/04/07/mock-api-in-microservices-architecture</id><content type="html" xml:base="http://localhost:4000/microservices/2023/04/07/mock-api-in-microservices-architecture.html"><![CDATA[<h2 id="overview"><strong>Overview</strong></h2>

<p>Setting up the entire stack locally isn’t an easy task, especially when there are multiple microservices involved. If this is something you’re already struggling with then you are at the right place. We will discuss the solution by using Mock APIs.</p>

<h2 id="challenges">Challenges</h2>

<p>A large application delivered as a network of small microservices requires real-time inter-service communication to function as a single application. As the number of microservices increase, this architecture becomes even more challenging. Here, we will focus only on synchronous communication using HTTP/S APIs. Most likely one would arrive at a situation with the following problems:</p>

<ol>
  <li>Setting up individual microservice on a developer’s local machine
    <ul>
      <li>Developer needs to configure other dependent service’s source code as well and keep pulling the latest code. (It is still okay with small dev team and having 3-5 microservices)</li>
      <li>On each latest pull, developer needs to make sure it doesn’t break anything</li>
      <li>Handling DB migrations for other dependent services and synchronizing them is a challenge.</li>
    </ul>
  </li>
  <li>Running Integration tests:Testing code changes for dependent features on a local machine is always painful.</li>
</ol>

<h2 id="-solutions"># Solutions</h2>

<p>There are multiple ways to set up a microservices stack locally.</p>

<ol>
  <li>Clone the repos of all the services and run them on the local machine. This is not feasible if you have many microservices.
    <ul>
      <li>This needs sufficient resources available on the Dev machine to run all the services.</li>
      <li>If a developer pulls the latest code from other dependent services, the code could break for no fault on their own.</li>
      <li>DB migrations and synchronizing them is a challenge</li>
    </ul>
  </li>
  <li>Have a dedicated DEV environment deployed on the cloud and let your local service communicate with other services.
    <ul>
      <li>This requires extra conditional code to bypass the authentication and authorization as your local service is now communicating with other services on the Dev environment.</li>
      <li>It ends with data inconsistency as all the developers are going to use the same DEV environment. It is not possible or cost-effective to provide a separate DEV environment to all developers.</li>
      <li>Challenge with background workers, where jobs will be picked up by workers running on dev env instead of your local worker.</li>
    </ul>
  </li>
  <li>Have a Mock server that will return the mock response for the APIs. This is a better solution than the above two, but again, this will add an extra burden on the Dev team to maintain this server.</li>
</ol>

<p>We tried all the above solutions and ended up with <a href="https://learning.postman.com/docs/designing-and-developing-your-api/mocking-data/setting-up-mock/">Mock Servers using Postman</a>.This is a very easy and simple solution to simulate the real APIs. It not only solves the local machine setup issue but it is very useful when your application is in early-stage development, where all the microservices are under development. In that case, you can mock the responses for other services and start the development of your service without waiting for others. This also makes it easy for frontend teams to proceed with their feature development by using mock APIs that simulate both success and error conditions.</p>

<h2 id="mock-apis">Mock APIs</h2>

<p>Let’s see how a mock API server works by taking an example of a User service with a simple functionality to list users.</p>

<h3 id="request">Request</h3>

<p><strong>GET</strong> https://usersvc.yourdomain.com/v1/users</p>

<h3 id="response">Response</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "data": {
    "users": [
      {
        "id": "98a4b655-9b0c-47f0-bf35-c56e4fb5fe13",
        "name": "FirstUserName"
      },
      {
        "id": "0b19b534-83f3-4072-9a9c-eb282fe2e373",
        "name": "SecondUserName"
      }
    ]
  }
}
</code></pre></div></div>

<p><em><strong>Note</strong>: You need to be signed into a Postman account to create a mock server</em></p>

<ol>
  <li>Create a collection</li>
  <li>Create your API requests and make sure those are saved to a collection</li>
  <li>
    <p>Create a mock server from the collection info menu</p>

    <p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3c2d387c-6553-4a3e-a046-b4c2cd59c405/image.png" alt="image.png" /></p>
  </li>
  <li>This will generate the mock server URL like this<code class="language-plaintext highlighter-rouge">https://18b77921-cc85-4819-811d-0403eec04251.mock.pstmn.io</code></li>
  <li>
    <p>Add an example to all the requests</p>

    <p><a href="https://lh5.googleusercontent.com/waCW7XA9PDichJSIXAbmQN1fgJzpS5EeRhCCTGNvRUE3DFlKqogxT9tfbFLt7irztSfIV0HL848bzp7IqWYeOkvwKIToX0vyfWK15mssP_WKi4czx3mxCVo-QeOfVMhgIan3veyT">https://lh5.googleusercontent.com/waCW7XA9PDichJSIXAbmQN1fgJzpS5EeRhCCTGNvRUE3DFlKqogxT9tfbFLt7irztSfIV0HL848bzp7IqWYeOkvwKIToX0vyfWK15mssP_WKi4czx3mxCVo-QeOfVMhgIan3veyT</a></p>
  </li>
  <li>
    <p>Save the expected response JSON with HTTP response code</p>

    <p><a href="https://lh4.googleusercontent.com/5jwAJyhqnXcfE7DSdvZGTKmyIYi1sPktEPpEOazML0rvAZf4YYcU9PXQ491yzPil9tJTCLUUm6QluFjbni4y9JD2CPtp7tBqyYKeSS_qmRp9X3wUbCgZk9X4rrS-PB-s-c5tFO-5">https://lh4.googleusercontent.com/5jwAJyhqnXcfE7DSdvZGTKmyIYi1sPktEPpEOazML0rvAZf4YYcU9PXQ491yzPil9tJTCLUUm6QluFjbni4y9JD2CPtp7tBqyYKeSS_qmRp9X3wUbCgZk9X4rrS-PB-s-c5tFO-5</a></p>
  </li>
  <li>
    <p>Now just replace the service URL with mock server URL to access the APIs like this<code class="language-plaintext highlighter-rouge">https://18b77921-cc85-4819-811d-0403eec04251.mock.pstmn.io/v1/users</code>.This will return the list of users saved earlier.</p>

    <p><a href="https://lh5.googleusercontent.com/Ho-zek1vHqjzVQ_oUhOXv0MZVu_EjHzYZCRFeDYPBsAYjT5tZJHbHpH6L2wli6IzOIuatSZ4To_8ZkpIB2PorPOwyypFWtJSobeGrB51DN6x2D3_9aCecG49g2Be-YJYu1Eb_2Le">https://lh5.googleusercontent.com/Ho-zek1vHqjzVQ_oUhOXv0MZVu_EjHzYZCRFeDYPBsAYjT5tZJHbHpH6L2wli6IzOIuatSZ4To_8ZkpIB2PorPOwyypFWtJSobeGrB51DN6x2D3_9aCecG49g2Be-YJYu1Eb_2Le</a></p>
  </li>
  <li>
    <p>Query params: You can add multiple example responses for query params, Postman Mock server matches the query param and returns the matched response.e.g. We have saved two examples, one for each.</p>

    <p><a href="https://lh6.googleusercontent.com/Aszm2TEsiC0r424leJ6Z3d6HTZgthZVNKEZs-bgCX8vz8Fw574yNiUA55tx5_OsMD8XHDduNk-mWfWJ-n0tuB-um_FSj7-DvLs5fKchAI7-PxdF9m7SW--EE0p2mY2bO0lV8tKpy">https://lh6.googleusercontent.com/Aszm2TEsiC0r424leJ6Z3d6HTZgthZVNKEZs-bgCX8vz8Fw574yNiUA55tx5_OsMD8XHDduNk-mWfWJ-n0tuB-um_FSj7-DvLs5fKchAI7-PxdF9m7SW–EE0p2mY2bO0lV8tKpy</a></p>
  </li>
  <li>
    <p>Mock server will return the user details as per <code class="language-plaintext highlighter-rouge">user_id</code> param</p>

    <p><a href="https://lh5.googleusercontent.com/zvLWDiOxf2_y4SCwqFJpaQ0o9cl3C3W1CC3d3_pMHAUDXf46yGHB8Lo_l0wcAA6XugfRVQiP5TBapkaGk3qfIBae55-erYZ4wuGCRlELHzjoQUnAaMpS9Bj3X5RxL_AzR4LZa9Ta">https://lh5.googleusercontent.com/zvLWDiOxf2_y4SCwqFJpaQ0o9cl3C3W1CC3d3_pMHAUDXf46yGHB8Lo_l0wcAA6XugfRVQiP5TBapkaGk3qfIBae55-erYZ4wuGCRlELHzjoQUnAaMpS9Bj3X5RxL_AzR4LZa9Ta</a></p>
  </li>
  <li>Headers: Same as query params, we can have multiple responses as per headers as well. But in case of headers we need to set <code class="language-plaintext highlighter-rouge">x-mock-match-request-body header</code> to true to enable request body matching and also set <code class="language-plaintext highlighter-rouge">x-mock-match-request-headers</code> for matching incoming mock request headers while making an API call to the mock server.</li>
</ol>

<p>Once you have all the API requests added with examples in the collection, you can configure the mock server URL in the service. You can then call any of the APIs using the mock server URL and API request path.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Postman Mock servers unblock the developer to start the implementation from day one for dependent features. And it simplifies the service configuration on the local machine.</p>]]></content><author><name></name></author><category term="microservices" /><summary type="html"><![CDATA[Overview]]></summary></entry><entry><title type="html">Welcome to Jekyll!</title><link href="http://localhost:4000/jekyll/update/2023/04/07/welcome-to-jekyll.html" rel="alternate" type="text/html" title="Welcome to Jekyll!" /><published>2023-04-07T15:30:12+05:30</published><updated>2023-04-07T15:30:12+05:30</updated><id>http://localhost:4000/jekyll/update/2023/04/07/welcome-to-jekyll</id><content type="html" xml:base="http://localhost:4000/jekyll/update/2023/04/07/welcome-to-jekyll.html"><![CDATA[<p>You’ll find this post in your <code class="language-plaintext highlighter-rouge">_posts</code> directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run <code class="language-plaintext highlighter-rouge">jekyll serve</code>, which launches a web server and auto-regenerates your site when a file is updated.</p>

<p>Jekyll requires blog post files to be named according to the following format:</p>

<p><code class="language-plaintext highlighter-rouge">YEAR-MONTH-DAY-title.MARKUP</code></p>

<p>Where <code class="language-plaintext highlighter-rouge">YEAR</code> is a four-digit number, <code class="language-plaintext highlighter-rouge">MONTH</code> and <code class="language-plaintext highlighter-rouge">DAY</code> are both two-digit numbers, and <code class="language-plaintext highlighter-rouge">MARKUP</code> is the file extension representing the format used in the file. After that, include the necessary front matter. Take a look at the source for this post to get an idea about how it works.</p>

<p>Jekyll also offers powerful support for code snippets:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">print_hi</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
<span class="n">print_hi</span><span class="p">(</span><span class="s1">'Tom'</span><span class="p">)</span>
<span class="c1">#=&gt; prints 'Hi, Tom' to STDOUT.</span></code></pre></figure>

<p>Check out the <a href="https://jekyllrb.com/docs/home">Jekyll docs</a> for more info on how to get the most out of Jekyll. File all bugs/feature requests at <a href="https://github.com/jekyll/jekyll">Jekyll’s GitHub repo</a>. If you have questions, you can ask them on <a href="https://talk.jekyllrb.com/">Jekyll Talk</a>.</p>]]></content><author><name></name></author><category term="jekyll" /><category term="update" /><summary type="html"><![CDATA[You’ll find this post in your _posts directory. Go ahead and edit it and re-build the site to see your changes. You can rebuild the site in many different ways, but the most common way is to run jekyll serve, which launches a web server and auto-regenerates your site when a file is updated.]]></summary></entry></feed>